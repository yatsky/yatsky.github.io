---
layout: post
title: "704 Binary Search"
excerpt: 想了一个记忆口诀
---

<div id="outline-container-orgff3ec4f" class="outline-2">
<h2 id="orgff3ec4f"><span class="section-number-2">1.</span> Description</h2>
<div class="outline-text-2" id="text-1">
<p>
Given an array of integers <code>nums</code>, which is sorted in ascending order, and an integer <code>target</code>, write a function to search <code>target</code> in <code>nums</code>.
If <code>target</code> exists, then return its index. Otherwise, return -1.
</p>

<p>
You must write an algorithm with <code>O(log n)</code> runtime complexity.
</p>

<p>
Constraints:
</p>
<ol class="org-ol">
<li>\(1 \leq nums.length \leq 10^{4}\)</li>
<li>\(-10^{4} \lt nums[i], target \lt 10^{4}\)</li>
<li>All the integers in <code>nums</code> are <b>unique</b></li>
<li><code>nums</code> is sorted in ascending order</li>
</ol>
</div>
<div id="outline-container-org2713842" class="outline-3">
<h3 id="org2713842"><span class="section-number-3">1.1.</span> Examples:</h3>
<div class="outline-text-3" id="text-1-1">
<pre class="example" id="orgfe16057">
Input: nums = [-1,0,3,5,9,12], target = 9
Output: 4
Explanation: 9 exists in nums and its index is 4

Input: nums = [-1,0,3,5,9,12], target = 2
Output: -1
Explanation: 2 does not exist in nums so return -1
</pre>
</div>
</div>
</div>

<div id="outline-container-org27d603a" class="outline-2">
<h2 id="org27d603a"><span class="section-number-2">2.</span> Solution</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org266373e" class="outline-3">
<h3 id="org266373e"><span class="section-number-3">2.1.</span> Understanding the problem</h3>
<div class="outline-text-3" id="text-2-1">
<p>
We use <a href="../2022-01-28-223636-binary_search.html#ID-7D287370-82D0-4B7E-BF90-D8013A5B6732">Binary Search</a> to achieve <code>O(log n)</code> runtime complexity.
</p>
</div>
</div>
<div id="outline-container-orgcb489b3" class="outline-3">
<h3 id="orgcb489b3"><span class="section-number-3">2.2.</span> Algorithm</h3>
</div>

<div id="outline-container-org7c8cb25" class="outline-3">
<h3 id="org7c8cb25"><span class="section-number-3">2.3.</span> Code</h3>
<div class="outline-text-3" id="text-2-3">
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>704 Binary Search my solution</label><pre class="src src-python" id="org02a9cf7"><span class="org-keyword">def</span> <span class="org-function-name">search</span><span class="org-rainbow-delimiters-depth-1">(</span>nums, target<span class="org-rainbow-delimiters-depth-1">)</span>:
<span class="org-highlight-indentation"> </span>   <span class="org-doc">"""</span>
<span class="org-doc"><span class="org-highlight-indentation"> </span></span><span class="org-doc">   :type nums: List[int]</span>
<span class="org-doc"><span class="org-highlight-indentation"> </span></span><span class="org-doc">   :type target: int</span>
<span class="org-doc"><span class="org-highlight-indentation"> </span></span><span class="org-doc">   :rtype: int</span>
<span class="org-doc"><span class="org-highlight-indentation"> </span></span><span class="org-doc">   """</span>
<span class="org-highlight-indentation"> </span>   <span class="org-variable-name">ret</span> = -1
<span class="org-highlight-indentation"> </span>   <span class="org-variable-name">left_idx</span> = 0
<span class="org-highlight-indentation"> </span>   <span class="org-comment-delimiter"># </span><span class="org-comment">why len(nums) - 1?</span>
<span class="org-highlight-indentation"> </span>   <span class="org-variable-name">right_idx</span> = <span class="org-builtin">len</span><span class="org-rainbow-delimiters-depth-1">(</span>nums<span class="org-rainbow-delimiters-depth-1">)</span> - 1

<span class="org-highlight-indentation"> </span>   <span class="org-comment-delimiter"># </span><span class="org-comment">Why use &lt;=?</span>
<span class="org-highlight-indentation"> </span>   <span class="org-keyword">while</span> left_idx &lt;= right_idx:
<span class="org-highlight-indentation"> </span>   <span class="org-highlight-indentation"> </span>   <span class="org-variable-name">mid_idx</span> = <span class="org-rainbow-delimiters-depth-1">(</span>left_idx + right_idx<span class="org-rainbow-delimiters-depth-1">)</span> // 2
<span class="org-highlight-indentation"> </span>   <span class="org-highlight-indentation"> </span>   <span class="org-variable-name">curr</span> = nums<span class="org-rainbow-delimiters-depth-1">[</span>mid_idx<span class="org-rainbow-delimiters-depth-1">]</span>

<span class="org-highlight-indentation"> </span>   <span class="org-highlight-indentation"> </span>   <span class="org-keyword">if</span> target == curr:
<span class="org-highlight-indentation"> </span>   <span class="org-highlight-indentation"> </span>   <span class="org-highlight-indentation"> </span>   <span class="org-keyword">return</span> mid_idx
<span class="org-highlight-indentation"> </span>   <span class="org-highlight-indentation"> </span>   <span class="org-keyword">elif</span> target &gt; curr:
<span class="org-highlight-indentation"> </span>   <span class="org-highlight-indentation"> </span>   <span class="org-highlight-indentation"> </span>   <span class="org-variable-name">left_idx</span> = mid_idx + 1
<span class="org-highlight-indentation"> </span>   <span class="org-highlight-indentation"> </span>   <span class="org-keyword">else</span>:
<span class="org-highlight-indentation"> </span>   <span class="org-highlight-indentation"> </span>   <span class="org-highlight-indentation"> </span>   <span class="org-variable-name">right_idx</span> = mid_idx - 1

<span class="org-highlight-indentation"> </span>   <span class="org-keyword">return</span> ret

<span class="org-comment-delimiter"># </span><span class="org-comment">tests</span>
<span class="org-variable-name">nums</span> = <span class="org-rainbow-delimiters-depth-1">[</span>-1, 0, 3, 5, 9, 12<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-variable-name">target</span> = 9
<span class="org-keyword">print</span><span class="org-rainbow-delimiters-depth-1">(</span>search<span class="org-rainbow-delimiters-depth-2">(</span>nums, target<span class="org-rainbow-delimiters-depth-2">)</span> == 4<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-variable-name">nums</span> = <span class="org-rainbow-delimiters-depth-1">[</span>-1, 0, 3, 5, 9, 12<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-variable-name">target</span> = 2
<span class="org-keyword">print</span><span class="org-rainbow-delimiters-depth-1">(</span>search<span class="org-rainbow-delimiters-depth-2">(</span>nums, target<span class="org-rainbow-delimiters-depth-2">)</span> == -1<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-variable-name">nums</span> = <span class="org-rainbow-delimiters-depth-1">[</span>0, 3, 5, 9, 12<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-variable-name">target</span> = 5
<span class="org-keyword">print</span><span class="org-rainbow-delimiters-depth-1">(</span>search<span class="org-rainbow-delimiters-depth-2">(</span>nums, target<span class="org-rainbow-delimiters-depth-2">)</span> == 2<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-variable-name">nums</span> = <span class="org-rainbow-delimiters-depth-1">[</span>0, 3, 5, 9, 12<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-variable-name">target</span> = 2
<span class="org-keyword">print</span><span class="org-rainbow-delimiters-depth-1">(</span>search<span class="org-rainbow-delimiters-depth-2">(</span>nums, target<span class="org-rainbow-delimiters-depth-2">)</span> == -1<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-variable-name">nums</span> = <span class="org-rainbow-delimiters-depth-1">[</span>-1<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-variable-name">target</span> = 1
<span class="org-keyword">print</span><span class="org-rainbow-delimiters-depth-1">(</span>search<span class="org-rainbow-delimiters-depth-2">(</span>nums, target<span class="org-rainbow-delimiters-depth-2">)</span> == -1<span class="org-rainbow-delimiters-depth-1">)</span>

<span class="org-variable-name">nums</span> = <span class="org-rainbow-delimiters-depth-1">[</span>0<span class="org-rainbow-delimiters-depth-1">]</span>
<span class="org-variable-name">target</span> = 0
<span class="org-keyword">print</span><span class="org-rainbow-delimiters-depth-1">(</span>search<span class="org-rainbow-delimiters-depth-2">(</span>nums, target<span class="org-rainbow-delimiters-depth-2">)</span> == 0<span class="org-rainbow-delimiters-depth-1">)</span>
</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>704 Binary Search my solution-results</label><pre class="src src-python" id="orgd504cb9"><span class="org-constant">True</span>
<span class="org-constant">True</span>
<span class="org-constant">True</span>
<span class="org-constant">True</span>
<span class="org-constant">True</span>
<span class="org-constant">True</span>
</pre>
</div>
</div>
<div id="outline-container-org6b97cd6" class="outline-4">
<h4 id="org6b97cd6"><span class="section-number-4">2.3.1.</span> Complexity</h4>
<div class="outline-text-4" id="text-2-3-1">
</div>
<div id="outline-container-orgb0eff7d" class="outline-5">
<h5 id="orgb0eff7d"><span class="section-number-5">2.3.1.1.</span> Time complexity:</h5>
<div class="outline-text-5" id="text-2-3-1-1">
<p>
\(O\log{n}\), where <code>n=len(nums)</code>
</p>
</div>
</div>
<div id="outline-container-org5b44404" class="outline-5">
<h5 id="org5b44404"><span class="section-number-5">2.3.1.2.</span> Space complexity:</h5>
<div class="outline-text-5" id="text-2-3-1-2">
<p>
\(O(n)\)
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org59b4805" class="outline-3">
<h3 id="org59b4805"><span class="section-number-3">2.4.</span> Leetcode solution</h3>
<div class="outline-text-3" id="text-2-4">
<p>
<code>nil</code>
</p>
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>704 Binary Search leetcode solution</label><pre class="src src-python" id="orgcb5328f">&lt;&lt;imports <span class="org-keyword">for</span> typing&gt;&gt;

</pre>
</div>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>704 Binary Search leetcode solution-results</label><pre class="src src-none" id="org7c5bd0a">
</pre>
</div>
</div>
<div id="outline-container-org68b7e7b" class="outline-4">
<h4 id="org68b7e7b"><span class="section-number-4">2.4.1.</span> Time complexity:</h4>
</div>

<div id="outline-container-orgf4ea3e9" class="outline-4">
<h4 id="orgf4ea3e9"><span class="section-number-4">2.4.2.</span> Space complexity:</h4>
</div>
</div>
</div>

<div id="outline-container-orgf597455" class="outline-2">
<h2 id="orgf597455"><span class="section-number-2">3.</span> More analysis</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org348e446" class="outline-3">
<h3 id="org348e446"><span class="section-number-3">3.1.</span> General thoughts</h3>
<div class="outline-text-3" id="text-3-1">
<p>
I never knew how to understand the conditions needed in <a href="../2022-01-28-223636-binary_search.html#ID-7D287370-82D0-4B7E-BF90-D8013A5B6732">Binary Search</a>.
</p>

<p>
I have the <a href="../2022-01-28-223636-binary_search.html#ID-F5A9C8B6-4A10-431F-AD4C-B2E4EEBA3097">Binary search key point</a> to help myself <i>memorize</i> the algorithm:
</p>
<ol class="org-ol">
<li>首尾要有效 - Both start and end indexes are valid indexes (can get element from the list)</li>
<li>首尾要相交 - <code>left_idx</code> and <code>right_idx</code> need to converge (<code>==</code>) so that we can handle a list of single element</li>
<li>中点需整除 - Use <code>mod 2</code> to get the mid point</li>
</ol>
<div class="org-src-container">
<pre class="src src-python"><span class="org-comment-delimiter"># </span><span class="org-comment">why len(nums) - 1?</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">because len(nums) - 1 is the last element of the list nums</span>
<span class="org-variable-name">right_idx</span> = <span class="org-builtin">len</span><span class="org-rainbow-delimiters-depth-1">(</span>nums<span class="org-rainbow-delimiters-depth-1">)</span> - 1

<span class="org-comment-delimiter"># </span><span class="org-comment">Why use &lt;=?</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">consider a list that only contains a single element,</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">then left_idx = 0 and right_idx = 0</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">if we don't have the equal sign here,</span>
<span class="org-comment-delimiter"># </span><span class="org-comment">we will easily fail this case</span>
<span class="org-keyword">while</span> left_idx &lt;= right_idx:
</pre>
</div>

<p>
Another point is that for a potentially empty list, we can simply return <code>-1</code> if the list's length is 0.
</p>
</div>
</div>
<div id="outline-container-org33224f2" class="outline-3">
<h3 id="org33224f2"><span class="section-number-3">3.2.</span> Related problems</h3>
<div class="outline-text-3" id="text-3-2">
<ol class="org-ol">
<li>[BROKEN LINK: idid:6705fa69-9835-4076-b293-cd962e3c5828]</li>
</ol>
</div>
</div>
</div>
<div id="outline-container-org95ece2b" class="outline-2">
<h2 id="org95ece2b"><span class="section-number-2">4.</span> Log time</h2>
<div class="outline-text-2" id="text-4">
</div>
</div>
